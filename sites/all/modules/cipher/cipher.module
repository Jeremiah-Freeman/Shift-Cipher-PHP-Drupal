<?php
function cipher_menu() {
    $items = [];
    $items['shift_cipher'] = [
            'title' => 'A Shifty Cipher',
            'type' => MENU_NORMAL_ITEM,
            'access callback' => TRUE,
            'page callback' => 'drupal_get_form',
            'page arguments' => ['shift_cipher_form'],
        ];
        $items['shift_cipher_success_page'] =[
            'title' => 'Shift Cipher Results',
            'type' => MENU_CALLBACK,
            'access callback' => TRUE,
            'page callback' => 'display_cipher_results',
            ];
        return $items;
    }

// shifter number //
function shift_cipher_form() {
    $form = [];
    $form['shifting_value'] = [
        '#title' => 'Shifting Value.',
        '#description' => t('( please input a number, this number will be the distance of moves to an encrypted letter )'),
        '#type' => 'textfield',
        '#required' => TRUE,
        '#element_validate' => ['element_validate_integer_positive'],
    ];
// shifter direction (left - right) //
    $form['direction'] = [
        '#title' => 'Encrypt in what direction?',
        '#description' => t('( please choose a ( left ) or ( right ) direction to encrypt too )'),
        '#type' => 'textfield',
        '#required' => TRUE,
        '#element_validate' => ['element_validate_left_right'],
    ];
// word to encrypt //
    $form['word_sentence'] = [
        '#title' => 'Enter a word or sentence.',
        '#description' => t('( this sentence will be encrypted according to your parameters )'),
        '#type' => 'textfield',
        '#required' => TRUE,
        '#element_validate' => ['element_validate_unique_characters'],
    ];

    $form['submit'] = [
        '#type' => 'submit',
        '#value' => 'ENCRYPT',
    ];
    return $form;
}
// form submission //
function shifty_cipher_form_submit($form, &$form_state) {

    $shifter_value = $form_state['values']['shifter_value'];
    $direction = $form_state['values']['direction'];
    $word_sentence = $form_state['values']['word_sentence'];
    $word_sentence = str_split(strtolower($form_state['values']['word_sentence']));
    $_SESSION['user_input'] = 'word_sentence';

    $result = [];
    $alpha = [
        'a' => 0, 'b' => 1, 'c' => 2, 'd' => 3, 'e' => 4, 'f' => 5, 'g' => 6, 'h' => 7, 'i' => 8, 'j' => 9, 'k' => 10, 'l' => 11, 'm' => 12, 'n' => 13, 'o' => 14, 'p' => 15, 'q' => 16, 'r' => 17, 's' => 18, 't' => 19,    'u' => 20, 'v' => 21, 'w' => 22, 'x' => 23, 'y' => 24, 'z' => 25
    ];
}


function element_validate_left_right($element) {
    if (($element['#value'] != 'right') && ($element['#value'] != 'left')) {
        form_error($element, t('Oops, gotta choose left or right only!'));
    }
}


function element_validate_unique_characters($element) {
    if(preg_match("/[^a-zA-Z.?!', ]/", $element['#value'])) {
        form_error($element, t("Opps sorry, only ?, !, ', ., ',' allowed"));
    }
}
